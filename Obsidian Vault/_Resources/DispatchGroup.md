[[GCD (Grand Central Dispatch)]]
#многопоточность
`DispatchGroup` — это механизм в GCD (Grand Central Dispatch) в Swift, который позволяет сгруппировать несколько асинхронных задач и синхронизировать их выполнение. Это очень полезно, когда вам нужно дождаться завершения нескольких параллельных задач, прежде чем продолжить выполнение последующего кода.

### Основные Функции DispatchGroup

- **enter()**: Уведомляет группу о том, что задача начала свое выполнение. Каждому вызову `enter()` должен соответствовать вызов `leave()`.
- **leave()**: Уведомляет группу о том, что задача завершила свое выполнение. Это сигнализирует группе, что одна из ее задач завершилась.
- **wait()**: Блокирует текущий поток до тех пор, пока все задачи в группе не будут завершены. Есть возможность указать тайм-аут.
- **notify(queue:execute:)**: Запланировать выполнение блока кода на определенной очереди после того, как все задачи в группе будут завершены.

### Пример Использования

Допустим, у вас есть несколько асинхронных задач, которые должны быть выполнены, прежде чем ваше приложение сможет перейти к следующему шагу:

```swift
let dispatchGroup = DispatchGroup()

dispatchGroup.enter()
someAsyncTask {
    // Завершение задачи
    dispatchGroup.leave()
}

dispatchGroup.enter()
anotherAsyncTask {
    // Завершение задачи
    dispatchGroup.leave()
}

dispatchGroup.notify(queue: .main) {
    // Этот код будет выполнен после завершения всех задач в группе
    print("Все асинхронные задачи завершены")
}
```

В этом примере `enter()` вызывается перед каждой асинхронной задачей, чтобы сообщить группе о начале новой задачи. Соответственно, `leave()` вызывается по завершении каждой задачи, сигнализируя группе об этом. Наконец, `notify(queue:execute:)` используется для выполнения блока кода после завершения всех задач в группе.

### Пример с Ожиданием (wait)

```swift
let dispatchGroup = DispatchGroup()

dispatchGroup.enter()
someAsyncTask {
    // Завершение задачи
    dispatchGroup.leave()
}

dispatchGroup.enter()
anotherAsyncTask {
    // Завершение задачи
    dispatchGroup.leave()
}

// Ожидание завершения всех задач в группе
dispatchGroup.wait()

// Этот код будет выполнен после завершения всех задач в группе
print("Все асинхронные задачи завершены")
```

В этом примере используется `wait()` для ожидания завершения всех задач в группе. Это может быть полезно, если вам нужно блокировать текущий поток до завершения всех задач.

### Заключение

`DispatchGroup` предоставляет мощный способ для управления и синхронизации множества асинхронных задач в вашем приложении. Он особенно полезен, когда вам нужно синхронизировать несколько независимых задач и выполнить какое-то действие только после их завершения.